<!-- <body> -->
<!-- Shop Detail Start -->
<style>


    .active1 {
        background-color: red;
    }

  .size-btn {
    background-color: transparent;
    border: 1px solid #ccc;
    color: #333;
    cursor: pointer;
    font-size: 16px;
    margin: 0 5px;
    padding: 10px 20px;
    transition: all 0.3s ease;
  }

  .size-btn:hover {
    background-color: #333;
    color: #fff;
  }

  .size__btn {
    display: flex;
    flex-wrap: nowrap;
    /* prevents buttons from wrapping to next line */
    width: 180px;
    /* adjust the width to fit all the buttons */
  }

  .size-btn {
    border-radius: 20px;
    /* make the buttons round */
    background-color: #e5e5e5;
    /* set the background color */
    color: #333;
    /* set the text color */
    font-size: 14px;
    /* adjust the font size if needed */
    padding: 5px 10px;
    /* adjust the padding if needed */
    margin-right: 10px;
    /* add some spacing between buttons */
  }

  .size-btn:hover {
    background-color: #ccc;
    /* change the background color on hover */
    cursor: pointer;
    /* show the pointer cursor on hover */
  }

  .size-btn.active {
    background-color: #fff;
    color: #555;
    border-color: #555;
    border-radius: 20px;
    box-shadow: 0px 0px 0px 2px #555;
  }
  .btn-group-toggle div {
  margin-bottom: 5px;
  }

    .product-images {
      display: flex;
    }
    /* .btn-group-toggle label.btn.active {
  background-color: #007bff;
  color: #fff;
  border-color: #007bff;
  } */

    .small-images {
      display: flex;
      flex-direction: column;
    }

    .large-image {
      margin-left: 20px;
      position: relative;
      overflow: hidden;
      margin-top: 16px;
    }

    .large-image img {
      transition: all 0.3s ease-out;
    }

    .overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      pointer-events: none;
      background-color: rgba(255, 255, 255, 0.5);
      z-index: 1;
      opacity: 0;
      transition: all 0.3s ease-out;
    }

    .large-image:hover img {
      transform: scale(1.2);
    }
    /* Define the black-button class */



    /* .large-image:hover .overlay {
      opacity: 1;
    } */
    
</style>
<div class="container-fluid py-5">
  <div class="row px-xl-5">
    <div class="col-lg-5 pb-5">
      <div id="product-carousel" class="carousel slide" data-ride="carousel">
        <div class="carousel-inner border">
          <div class="carousel-item active">
            <div class="large-image" style="margin-top: 15px">
              <a
                href="/uploads/<%=oneProduct.images[0]%>"
                class="MagicZoom"
                data-options="zoomPosition: inner"
              >
                <img
                  style="max-height: 550px; min-height: 550px"
                  data-hash="product-1"
                  class="product_big_img"
                  src="/uploads/<%=oneProduct.images[0]%>"
                  alt=""
                  id="largeImage"
                />
              </a>
            </div>
          </div>
          <div class="carousel-item">
            <div class="large-image" style="margin-top: 15px">
              <a
                href="/uploads/<%=oneProduct.images[1]%>"
                class="MagicZoom"
                data-options="zoomPosition: inner"
              >
                <img
                  style="max-height: 550px; min-height: 550px"
                  data-hash="product-1"
                  class="product_big_img"
                  src="/uploads/<%=oneProduct.images[1]%>"
                  alt=""
                  id="largeImage"
                />
              </a>
            </div>
          </div>
          <div class="carousel-item">
            <div class="large-image" style="margin-top: 15px">
              <a
                href="/uploads/<%=oneProduct.images[2]%>"
                class="MagicZoom"
                data-options="zoomPosition: inner"
              >
                <img
                  style="max-height: 550px; min-height: 550px"
                  data-hash="product-1"
                  class="product_big_img"
                  src="/uploads/<%=oneProduct.images[2]%>"
                  alt=""
                  id="largeImage"
                />
              </a>
            </div>
          </div>
        </div>
        <a
          class="carousel-control-prev"
          href="#product-carousel"
          data-slide="prev"
        >
          <i class="fa fa-2x fa-angle-left text-dark"></i>
        </a>
        <a
          class="carousel-control-next"
          href="#product-carousel"
          data-slide="next"
        >
          <i class="fa fa-2x fa-angle-right text-dark"></i>
        </a>
      </div>
    </div>

    <div class="col-lg-7 pb-5">
      <h3 class="font-weight-semi-bold"><%=oneProduct.name %></h3>
      <div class="d-flex mb-3">
        <div class="text-primary mr-2">
          <small class="fas fa-star"></small>
          <small class="fas fa-star"></small>
          <small class="fas fa-star"></small>
          <small class="fas fa-star-half-alt"></small>
          <small class="far fa-star"></small>
        </div>
        <small class="pt-1">(50 Reviews)</small>
      </div>
      <h3 class="font-weight-semi-bold mb-4">₹<%= oneProduct.price %></h3>
      <br />
      <p class="mb-4"><%= oneProduct.description %></p>
      <br />
      <div class="size__btn">
        <button id="s-btn" class="size-btn">S</button>
        <button id="m-btn" class="size-btn">M</button>
        <button id="l-btn" class="size-btn">L</button>
        <button id="xl-btn" class="size-btn">XL</button>
        <button id="xxl-btn" class="size-btn">XXL</button>
      </div>
      <br />
      <!-- <div class="d-flex mb-4">
        <p class="text-dark font-weight-medium mb-0 mr-3">Colors:</p>
        <form>
          <div class="custom-control custom-radio custom-control-inline">
            <input
              type="radio"
              class="custom-control-input"
              id="color-1"
              name="color"
            />
            <label class="custom-control-label" for="color-1">Black</label>
          </div>
          <div class="custom-control custom-radio custom-control-inline">
            <input
              type="radio"
              class="custom-control-input"
              id="color-2"
              name="color"
            />
            <label class="custom-control-label" for="color-2">White</label>
          </div>
          <div class="custom-control custom-radio custom-control-inline">
            <input
              type="radio"
              class="custom-control-input"
              id="color-3"
              name="color"
            />
            <label class="custom-control-label" for="color-3">Red</label>
          </div>
          <div class="custom-control custom-radio custom-control-inline">
            <input
              type="radio"
              class="custom-control-input"
              id="color-4"
              name="color"
            />
            <label class="custom-control-label" for="color-4">Blue</label>
          </div>
          <div class="custom-control custom-radio custom-control-inline">
            <input
              type="radio"
              class="custom-control-input"
              id="color-5"
              name="color"
            />
            <label class="custom-control-label" for="color-5">Green</label>
          </div>
        </form>
      </div> -->
      <div class="d-flex align-items-center mb-4 pt-2">
        <!-- <div class="input-group quantity mr-3" style="width: 130px">
          <div class="input-group-btn">
            <button class="btn btn-primary btn-minus" id="minus">
              <i class="fa fa-minus"></i>
            </button>
          </div>
          <input
            type="text"
            class="form-control bg-secondary text-center"
            value="1"
            id="quantity"
          />
          <div class="input-group-btn">
            <button class="btn btn-primary btn-plus" id="plus">
              <i class="fa fa-plus"></i>
            </button>
          </div>
        </div> -->
        <br /><br /><br /><br /><br />
        <button
          type="button"
          class="btn btn-primary px-3"
          onclick="addToCart('<%=oneProduct._id %>')"
        >
          <i class="fa fa-shopping-cart mr-1"></i> Add To Cart
        </button>
      </div>
      <!-- <div class="d-flex pt-2">
            <p class="text-dark font-weight-medium mb-0 mr-2">Share on:</p>
            <div class="d-inline-flex">
              <a class="text-dark px-2" href="">
                <i class="fab fa-facebook-f"></i>
              </a>
              <a class="text-dark px-2" href="">
                <i class="fab fa-twitter"></i>
              </a>
              <a class="text-dark px-2" href="">
                <i class="fab fa-linkedin-in"></i>
              </a>
              <a class="text-dark px-2" href="">
                <i class="fab fa-pinterest"></i>
              </a>
            </div>
          </div> -->
    </div>
  </div>
  <div class="row px-xl-5">
    <div class="col">
      <div class="nav nav-tabs justify-content-center border-secondary mb-4">
        <a class="nav-item nav-link active" data-toggle="tab" href="#tab-pane-1"
          >Description</a
        >
        <a class="nav-item nav-link" data-toggle="tab" href="#tab-pane-2"
          >Information</a
        >
        <a class="nav-item nav-link" data-toggle="tab" href="#tab-pane-3"
          >Reviews (0)</a
        >
      </div>
      <div class="tab-content">
        <div class="tab-pane fade show active" id="tab-pane-1">
          <h4 class="mb-3">Product Description</h4>
          <p><%= oneProduct.description %></p>
        </div>
        <div class="tab-pane fade" id="tab-pane-2">
          <h4 class="mb-3">Additional Information</h4>
          <p><%= oneProduct.moreInfo %></p>
        </div>
        <div class="tab-pane fade" id="tab-pane-3">
          <div class="row">
            <div class="col-md-6">
              <h4 class="mb-4">1 review for "Colorful Stylish Shirt"</h4>
              <div class="media mb-4">
                <img
                  src="/img/user.jpg"
                  alt="Image"
                  class="img-fluid mr-3 mt-1"
                  style="width: 45px"
                />
                <div class="media-body">
                  <h6>
                    John Doe<small> - <i>01 Jan 2045</i></small>
                  </h6>
                  <div class="text-primary mb-2">
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star"></i>
                    <i class="fas fa-star-half-alt"></i>
                    <i class="far fa-star"></i>
                  </div>
                  <p>
                    Diam amet duo labore stet elitr ea clita ipsum, tempor
                    labore accusam ipsum et no at. Kasd diam tempor rebum magna
                    dolores sed sed eirmod ipsum.
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <h4 class="mb-4">Leave a review</h4>
              <small
                >Your email address will not be published. Required fields are
                marked *</small
              >
              <div class="d-flex my-3">
                <p class="mb-0 mr-2">Your Rating * :</p>
                <div class="text-primary">
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                  <i class="far fa-star"></i>
                </div>
              </div>
              <form>
                <div class="form-group">
                  <label for="message">Your Review *</label>
                  <textarea
                    id="message"
                    cols="30"
                    rows="5"
                    class="form-control"
                  ></textarea>
                </div>
                <div class="form-group">
                  <label for="name">Your Name *</label>
                  <input type="text" class="form-control" id="name" />
                </div>
                <div class="form-group">
                  <label for="email">Your Email *</label>
                  <input type="email" class="form-control" id="email" />
                </div>
                <div class="form-group mb-0">
                  <input
                    type="submit"
                    value="Leave Your Review"
                    class="btn btn-primary px-3"
                  />
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<!-- Shop Detail End -->
<!-- <script src="/js/bootstrap.js"></script> -->

<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<!-- <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.bundle.min.js"></script> -->
<script src="/lib/easing/easing.min.js"></script>
<script src="/lib/owlcarousel/owl.carousel.min.js"></script>
<script src="/javascripts/quantityBtn.js"></script>
<script src="/js/jquery-3.4.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/magnify.js/1.3.0/magnify.min.js"></script> -->
<script>
  $(".carousel-item img").magnify();
</script>
<script>
  const smallImages = document.querySelectorAll(".small-images img");
  const largeImage = document.querySelector(".large-image img");
  const overlay = document.createElement("div");
  overlay.classList.add("overlay");
  largeImage.parentElement.appendChild(overlay);
  smallImages.forEach((img, index) => {
    img.addEventListener("mouseover", () => {
      const imgSrc = img.getAttribute("src");
      largeImage.setAttribute("src", imgSrc);
    });
  });

  document.addEventListener("DOMContentLoaded", function () {
    var smallImages = document.getElementsByClassName("small-image");
    for (var i = 0; i < smallImages.length; i++) {
      smallImages[i].addEventListener("click", function () {
        var imgSrc = this.getAttribute("data-imgsrc");
        var largeImage = document.getElementById("largeImage");
        largeImage.src = imgSrc;
        new MagicZoom(largeImage);
      });
    }
  });
</script>

<style>
  .my-swal-container {
    font-family: Arial, sans-serif;
  }

  .my-swal-header {
    background-color: #33333300;
    color: #fff;
    border: none;
  }

  .my-swal-title {
    font-size: 24px;
    font-weight: bold;
    color: #333;
  }

  .my-swal-close-button {
    position: absolute;
    top: 10px;
    right: 10px;
    font-size: 18px;
    color: #887d7d;
    background-color: transparent;
    border: none;
    cursor: pointer;
  }

  .my-swal-close-button:hover {
    color: #e74949;
  }

  .my-swal-icon {
    color: #333;
  }

  .my-swal-content {
    font-size: 18px;
    color: #333;
    padding: 20px;
  }

  .my-swal-actions {
    text-align: center;
  }

  .my-swal-confirm-button {
    background-color: #333;
    color: #fff;
    font-size: 18px;
    font-weight: bold;
    padding: 10px 20px;
    border: none;
    cursor: pointer;
  }

  .my-swal-confirm-button:hover {
    background-color: #555;
  }

  .my-swal-container-1 {
    background-color: #fff;
    border-radius: 8px;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .my-swal-popup-1 {
    padding: 20px;
  }

  .my-swal-title-1 {
    font-size: 24px;
    margin-bottom: 10px;
  }

  .my-swal-text-1 {
    font-size: 16px;
    margin-bottom: 20px;
  }

  .my-swal-confirm-button-1 {
    padding: 10px 20px;
    background-color: #ff9800;
    color: #fff;
    border-radius: 4px;
    font-size: 16px;
    transition: background-color 0.3s ease;
  }

  .my-swal-confirm-button-1:hover {
    background-color: #f57c00;
  }

  .my-swal-close-button-1 {
    font-size: 24px !important;
    color: #999;
    transition: color 0.3s ease;
  }

  .my-swal-close-button-1:hover {
    color: #666;
  }
</style>
<script>
  function showLoader() {
    document.getElementById("loader").style.visibility = "visible";
  }

  function hideLoader() {
    document.getElementById("loader").style.visibility = "hidden";
  }

  $(".size-btn").click(function () {
    $(this).toggleClass("active").siblings().removeClass("active");
    const size = $(this).text();
    console.log(`Selected size: ${size}`);
  });

  $(document).ready(function () {
    $(".size-btn").click(function () {
      showLoader();
      var size = $(this).text(); // Get the size from the button's text
      let proId = document.getElementById("hiddenId").value;
      console.log(proId, "hidden");
      console.log(size);
      $.ajax({
        url: `/product-size-selector/${size}/?proId=${proId}`,
        type: "get",
        success: (response) => {
          if (response) {
            let prev = $(".cart-btn").html();
            $(".cart-btn").html(
              '<span class="icon_bag_alt"></span> Go to cart'
            );
            $(".cart-btn").attr("onclick", 'window.location.href="/cart"');
            hideLoader();
          } else {
            $(".cart-btn").html(
              '<span class="icon_bag_alt"></span> Add to cart'
            );
            $(".cart-btn").attr("onclick", 'addToCart("' + proId + '")');

            hideLoader();
          }
        },
      });
    });
  });

  function addToCart(proId) {
    // Check if user exists
    userExists((userExists) => {
      if (userExists) {
        const activeBtn = $(".size-btn.active");
        const size = $(".size-btn.active").text();
        console.log(proId);
        if (activeBtn.length > 0) {
          $.ajax({
            url: `/addtoCart/${proId}/?size=${size}`,
            method: "get",
            success: (response) => {
              let count = $("#cartCount").html();
              count = parseInt(count) + 1;
              $("#cartCount").html(count);

              Swal.fire({
                title: "Thank You!",
                text: "Your product has been added to your cart.",
                icon: "success",
                customClass: {
                  container: "my-swal-container",
                  popup: "my-swal-popup",
                  header: "my-swal-header",
                  title: "my-swal-title",
                  closeButton: "my-swal-close-button",
                  icon: "my-swal-icon",
                  content: "my-swal-content",
                  actions: "my-swal-actions",
                  confirmButton: "my-swal-confirm-button",
                },
                showCloseButton: true,
                showConfirmButton: true,
                confirmButtonText: "View Cart",
              }).then((result) => {
                if (result.isConfirmed) {
                  window.location.href = "/shoppingCart";
                }
              });
            },
          });
        } else {
          Swal.fire({
            title: "Size not selected",
            text: "Please select a size to proceed.",
            icon: "error",
            customClass: {
              container: "my-swal-container-1",
              popup: "my-swal-popup-1",
              title: "my-swal-title-1",
              text: "my-swal-text-1",
              confirmButton: "my-swal-confirm-button-1",
              closeButton: "my-swal-close-button-1",
            },
            showCloseButton: true,
            closeButtonHtml: '<i class="fas fa-times"></i>',
          });
        }
      } else {
        // Redirect to login page
        window.location.href = "/login";
      }
    });
  }

  function userExists(callback) {
    // Check if user exists
    $.ajax({
      url: "/checkUserSession",
      method: "get",
      success: (response) => {
        const userExists = response.isAuthenticated;
        callback(userExists);
      },
      error: (error) => {
        console.error("Error checking user session:", error);
        callback(false);
      },
    });
  }

  // function addToCart(proId) {
  //   $.ajax({
  //     url: `/addtoCart/${proId}`,
  //     method: "get",
  //     success: (response) => {
  //       // alert(response)

  //       let count = $("#cartCount").html();
  //       count = parseInt(count) + 1;
  //       $("#cartCount").html(count);
  //       console.log("alen babu");
  //       Swal.fire({
  //         title: "Product Added",
  //         text: "The product has been added to your cart",
  //         icon: "success",
  //         customClass: {
  //           container: "my-swal-container",
  //           popup: "my-swal-popup",
  //           content: "my-swal-content",
  //         },
  //       });
  //       // console.log(typeof (count))
  //       // console.log(count, 'countttt')
  //     },
  //   });
  // }
</script>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<!-- Include SweetAlert2 library -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10.16.6/dist/sweetalert2.min.js"></script>
<!-- </body>
</html> -->
